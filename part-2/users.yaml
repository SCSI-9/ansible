---
 - name: Create Users
   hosts: all
   become: yes
   user: ansible
   vars:
      alice_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          63386639393534366434646130386662373761393866616232326334313661623037363565653535
          6433626565666265336466316137346435323866653866320a323437626165393539623834316565
          64636266613162313833366532653261336430386363326538316136333262343535353562373632
          3333656239613762340a386237323764383130396564323837366462626461653431633562353063
          6136
      bobs_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          32343662653038353739656563363332666637383138333466326433623836383061646539353438
          3432303066353061333163666239313834616163666336380a663030613835656333326564323435
          66386661363539313631626637656439613030333638653135653938626463393134653463366332
          6366353936343662630a323536333234666238333261396332323164363061343837346237393561
          6130
      carols_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          61326234356532613435326233343064653463663265613066313537336162613431626135383030
          6361656633373662363638646638323238353361366339330a326330306531306639306163646139
          66326630373565333466326538656231656131326566623261653362386635373134643134643538
          6161636231313631610a346166386539323938626235383762636634643065653564643062343233
          3462
   tasks:
    
   - name: Use loop for user creation
     user:
       name: "{{ item.name }}"
       comment: "{{ item.mail }}"
       state: present
       password: "{{ item.password }}"
       home: "{{ item.home }}"
     loop:
       - { name: 'Alice', password: 'var.alice_pass', home: '/home/alice', mail: 'alice@example.com' }
       - { name: 'Bob', password: 'var.bobs_password', home: '/home/bob', mail: 'bob@example.com' }
       - { name: 'Carol', password: 'var.carols_password', home: '/home/carol', mail: 'carol@example.com' }  

